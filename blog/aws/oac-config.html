<!DOCTYPE html>
<html lang="en">

<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-11478199739"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-11478199739');
</script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AWS Blog Wolfgang Unger | Origin Access Control</title>
    <meta name="description" content="AWS Blog Wolfgang Unger & SCC Brasil">
    <meta name="keywords"
        content="SCC Brasil, Software, Cloud Consulting, AWS, Cloud, Migration, CDK, Lambda, CodePipeline, CodeBuild, Batch, EC2, RDS, S3, CodeDeploy, Jenkins, SSM, Fargate, ECS, EKS, Devops, Shoring, Security, Software Development, Blumenau, Santa Catarina, Brasil, Brazil, Cloud Training, Consulting, Engineering,  Wolfgang Unger, Nuvem, Desenvolvimento, Consultoria, Migração, Operações, Segurança, os cloud gurus, #sccbrasil, #oscloudgurus, ">
    <meta name="author" content="AWS Blog Wolfgang Unger">
    <meta name="og:title" property="og:title" content="AWS Blog Wolfgang Unger & SCC Brasil">

    <!-- Favicons
            ================================================== -->
            <link rel="shortcut icon" href="../../img/SCC.ico" type="image/x-icon" />
            <link rel="icon" href="../../img/SCC.ico" type="image/x-icon"  />
    <link rel="apple-touch-icon" href="../../img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../fonts/font-awesome/css/font-awesome.css">

    <!-- Stylesheet
            ================================================== 
        <link rel="stylesheet" type="text/css"  href="css/styles_menu.css">        
        
        -->
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <link rel="stylesheet" type="text/css" href="../../css/prettyPhoto.css">
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,900,300' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@900&display=swap" rel="stylesheet"
        type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@200;300;400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <script type="text/javascript" src="js/modernizr.custom.js"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="script.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
              <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
              <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->
</head>

<body>
    <!-- Navigation
            ==========================================-->
    <nav id="menu" class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span> <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand-scc" href="../../index.html">SCC</a>
            </div>
        </div>
    </nav>


    <!-- Header -->
    <header class="text-center" name="home">
        <div class="intro-text">
            <!--<h1>We are <span class="color">Optics</span></h1>
                
                <h1>SCC</h1>
                -->
            <p class="paragraph1">SCC</p>
            <p class="paragraph1b">Brasil</p>
            <p class="paragraph1c">os cloud gurus </p>
            <p class="paragraph1d">Software Cloud Consulting</p>
            <p class="paragraph1e">Your software development, cloud, consulting & shoring company</p>
            <div class="clearfix"></div>
    </header>



    <div id="about-section">
        <div class="container">
            <div class="section-title">
                <h2>Implementing Origin Access Control to secure your s3 bucket objects while using Cloudfront</h2>
                <hr>
            </div>
            <div class="space"></div>
            <div class="row">
                <div class="col-md-12">
                    <img class="blog-image" src="img/money.avif" alt="7" loading="lazy" />
                    <p></p>
                    <h4>By Daniel do Nascimento</h4><br>
                    <p>Usually when a application is new and small we tend to relax the storage configuration, for example not implementing correct storage tiering, <br>
                        and implementing bucket policies that allow all the objects to be public, don't configure correcly the CORS, and so on.<br>
                        As your application grows, you must start implementing some best practices, one of the most common is implement cloudfront, to cache the objects and reduce the latency,<br>
                        And one of the steps to implement cloudfront is to configure the Origin Access Identity (OAI) or Origin Access Control (OAC).<br>

                        Until 2022, aws supply the OAI, that is a special cloudfront user that you can associate with your distribution, <br>
                        and this user has permission to access the objects in your S3 bucket, giving you the ability to restrict access to your objects, <br>
                        and also to use the bucket policy to allow only the cloudfront distribution to access the objects.<br>

                        Since 2022, aws supply the OAC, OAC strengthens security with short-term credentials and more frequent credential rotations compared to OAI. 
                        It also allows for granular policy configurations through resource-based policies, providing better protection against confused deputy attacks.<br>
                    </p><br>


                    <h4>The Evolution from OAI to OAC</h4>                    
                    <p>While OAI offered a secure way to connect S3 origins to CloudFront, it fell short in supporting granular policy configurations, 
                        HTTP and HTTPS requests using the POST method in AWS regions requiring AWS Signature Version 4 (SigV4), and integration 
                        with Server-Side Encryption with AWS Key Management Service (SSE-KMS). OAC addresses these limitations and introduces 
                        several notable enhancements.</p>
                    
                    <h4>Configuring OAC for an Existing CloudFront Distribution</h4>
                    
                    <p>To configure OAC, sign in to the AWS Management Console and navigate to the CloudFront console. Select a distribution 
                        from the list and choose the S3 origin you wish to associate with an origin access control setting under the Origins tab. 
                        If the origin is public or uses OAI, it will show as such. To use OAC, select "Origin access control settings" and choose 
                        an existing origin access control or create a new control setting with one of three signing options.</p>
                    
                    <h4>Updating an Existing Distribution</h4>
                    
                    <p>When updating a distribution, it's crucial to modify the S3 policy to permit the CloudFront IAM service principal and your 
                        distribution resource to access the S3 bucket. We recommend updating the policy to allow access to both OAI and OAC before 
                        saving the origin configuration, effectively reducing service downtime to zero.</p>
                    
                    <pre>
                    {
                        "Version": "2012-10-17",
                        "Statement": [
                            {
                                "Sid": "AllowCloudFrontServicePrincipalReadOnly",
                                "Effect": "Allow",
                                "Principal": {
                                    "Service": "cloudfront.amazonaws.com"
                                },
                                "Action": "s3:GetObject",
                                "Resource": "arn:aws:s3:::DOC-EXAMPLE-BUCKET/*",
                                "Condition": {
                                    "StringEquals": {
                                        "AWS:SourceArn": "arn:aws:cloudfront::ACCOUNT_ID:distribution/DISTRIBUTION_ID"
                                    }
                                }
                            },
                            {
                                "Sid": "AllowLegacyOAIReadOnly",
                                "Effect": "Allow",
                                "Principal": {
                                    "AWS": "arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity EH1HDMB1FH2TC"
                                },
                                "Action": "s3:GetObject",
                                "Resource": "arn:aws:s3:::DOC-EXAMPLE-BUCKET/*"
                            }
                        ]
                    }
                    </pre>
                    
                    <p>If you need to upload objects to S3, update the policy with additional permissions for "s3:PutObject". 
                        Finally, choose Save at the bottom of the page.</p>
                    
                    <h4>Advantages of OAC</h4>
                    
                    <p>OAC is designed with enhanced security practices such as short-term credentials, frequent credential rotations, and 
                        resource-based policies, providing stronger security for your distributions and better protection against confused 
                        deputy attacks. It supports all HTTP methods, including GET, PUT, POST, PATCH, DELETE, OPTIONS, and HEAD. 
                        OAC also supports downloading and uploading S3 objects encrypted with SSE-KMS. Furthermore, 
                        OAC allows access to S3 in all AWS regions, including existing and future regions, unlike OAI, 
                        which will only be supported in existing AWS regions and regions launched before December 2022.</p>

                </div>

            </div>
        </div>
        <center>
            <li><a href="blog.html" class="page-scroll">Back to Blog Overview</a></li>
        </center>
    </div>




    <div id="team-section">
        <div class="container">
            <div class="section-title">
                <h2>Autor</h2>
                <hr>
            </div>
            <div id="row">
                <div class="col-md-3 col-sm-6 team">
                    <div class="thumbnail"> <img src="../../img/team/perfilDaniel.jpg" alt="..." class="team-img">
                        <div class="caption">
                            <h3>Daniel do Nascimento</h3>
                            <p>AWS Developer</p>
                            <p>2 x AWS Certified </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Contact Section -->

    <div id="social-section">
        <div class="container">
            <div class="social">
                <ul>
                    <li><a href="https://www.facebook.com/SCC-Brasil-111049103585600"><i class="fa fa-facebook"></i></a>
                    </li>
                    <li><a href="https://github.com/wolfgangunger"><i class="fa fa-github"></i></a></li>
                    <li><a href="https://www.instagram.com/sccbrasil.insta/"><i class="fa fa-instagram"></i></a></li>
                    <li><a href="https://www.linkedin.com/company/26187795/"><i class="fa fa-linkedin"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
    <div id="footer">

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="../..js/jquery.1.11.1.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <script type="text/javascript" src="../../js/SmoothScroll.js"></script>
    <script type="text/javascript" src="../../js/jquery.prettyPhoto.js"></script>
    <script type="text/javascript" src="../../js/jquery.isotope.js"></script>
    <script type="text/javascript" src="../../js/jqBootstrapValidation.js"></script>
    <script type="text/javascript" src="../../js/contact_me.js"></script>

    <!-- Javascripts
            ================================================== -->
    <script type="text/javascript" src="../../js/main.js"></script>
</body>

</html>